import{d as h}from"./common-BxRz0MhJ.js";import{r as u,o as b,a as s,b as w,c as x,f as m,e as t,w as a,g as _,E as d,j as y}from"./index-BC9YzqKM.js";function N(i){return h("CrpcServer/AuthService/login/V1",i)}const k={class:"sci-fi-login"},C=m("h1",null,"欢迎您的到来！",-1),J=m("h1",null,"Welcome to your arrival!",-1),M={style:{"margin-top":"5%"}},B={__name:"IndexView",setup(i){const l=u({account:"",password:""}),p=u({protocol:"",ip:"",port:""}),c=u(!0),v=u(!0);function g(){v.value?localStorage.setItem("server",JSON.stringify(p.value)):localStorage.removeItem("server"),c.value?localStorage.setItem("userInfo",JSON.stringify(l.value)):localStorage.removeItem("userInfo"),N(l.value).then(e=>{e.data.data.code===200?(localStorage.setItem("token",e.data.data.data),d.success(e.data.data.message),y.push("/")):d.error(e.data.data.message)}).catch(e=>{console.log(e.errMsg),e.errMsg==="request:fail"?d.error("登录失败！请检查协议、ip、端口是否正确！"):d.error("登录失败！请检查协议、ip、端口、账号和密码是否正确！")})}return b(()=>{const e=localStorage.getItem("userInfo");e&&(l.value=JSON.parse(e));const o=localStorage.getItem("server");o&&(p.value=JSON.parse(o))}),(e,o)=>{const f=s("el-input"),n=s("el-form-item"),S=s("el-checkbox"),V=s("el-button"),I=s("el-form");return w(),x("div",k,[C,J,m("div",M,[t(I,{model:l.value,"label-width":"auto",style:{"max-width":"600px"}},{default:a(()=>[t(n,{label:"账号"},{default:a(()=>[t(f,{modelValue:l.value.account,"onUpdate:modelValue":o[0]||(o[0]=r=>l.value.account=r),placeholder:"请输入您的账号！"},null,8,["modelValue"])]),_:1}),t(n,{label:"密码"},{default:a(()=>[t(f,{modelValue:l.value.password,"onUpdate:modelValue":o[1]||(o[1]=r=>l.value.password=r),type:"password",placeholder:"请输入您的密码！"},null,8,["modelValue"])]),_:1}),t(n,null,{default:a(()=>[t(S,{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=r=>c.value=r)},{default:a(()=>[_("记住密码")]),_:1},8,["modelValue"])]),_:1}),t(n,null,{default:a(()=>[t(V,{type:"primary",class:"login-btn",onClick:g},{default:a(()=>[_("登录")]),_:1})]),_:1})]),_:1},8,["model"])])])}}};export{B as default};
