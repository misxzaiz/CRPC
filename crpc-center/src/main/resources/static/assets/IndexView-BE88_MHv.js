import{d as w}from"./common-Be_JQdrY.js";import{r as p,o as x,a as m,b as i,c as h,f as g,e as o,w as t,h as f,i as _,g as V,E as c,j as N}from"./index-C4v6H-X2.js";function U(I){return w("CrpcServer/AuthService/login/V1",I)}const C={class:"sci-fi-login"},B=g("h1",null,"欢迎您的到来！",-1),J=g("h1",null,"Welcome to your arrival!",-1),M={style:{"margin-top":"5%"}},P={__name:"IndexView",setup(I){const r=p({account:"",password:""}),u=p({protocol:"",ip:"",port:""}),v=p(!0),n=p(!0);function b(){n.value?localStorage.setItem("server",JSON.stringify(u.value)):localStorage.removeItem("server"),v.value?localStorage.setItem("userInfo",JSON.stringify(r.value)):localStorage.removeItem("userInfo"),U(r.value).then(a=>{a.data.data.code===200?(localStorage.setItem("token",a.data.data.data),c.success(a.data.data.message),N.push("/")):c.error(a.data.data.message)}).catch(a=>{console.log(a.errMsg),a.errMsg==="request:fail"?c.error("登录失败！请检查协议、ip、端口是否正确！"):c.error("登录失败！请检查协议、ip、端口、账号和密码是否正确！")})}return x(()=>{const a=localStorage.getItem("userInfo");a&&(r.value=JSON.parse(a));const e=localStorage.getItem("server");e&&(u.value=JSON.parse(e))}),(a,e)=>{const d=m("el-input"),s=m("el-form-item"),S=m("el-checkbox"),y=m("el-button"),k=m("el-form");return i(),h("div",C,[B,J,g("div",M,[o(k,{model:r.value,"label-width":"auto",style:{"max-width":"600px"}},{default:t(()=>[n.value?(i(),f(s,{key:0,label:"协议"},{default:t(()=>[o(d,{modelValue:u.value.protocol,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value.protocol=l),placeholder:"请输入您的协议！"},null,8,["modelValue"])]),_:1})):_("",!0),n.value?(i(),f(s,{key:1,label:"IP"},{default:t(()=>[o(d,{modelValue:u.value.ip,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value.ip=l),placeholder:"请输入您的IP！"},null,8,["modelValue"])]),_:1})):_("",!0),n.value?(i(),f(s,{key:2,label:"端口"},{default:t(()=>[o(d,{modelValue:u.value.port,"onUpdate:modelValue":e[2]||(e[2]=l=>u.value.port=l),placeholder:"请输入您的端口！"},null,8,["modelValue"])]),_:1})):_("",!0),o(s,{label:"账号"},{default:t(()=>[o(d,{modelValue:r.value.account,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.account=l),placeholder:"请输入您的账号！"},null,8,["modelValue"])]),_:1}),o(s,{label:"密码"},{default:t(()=>[o(d,{modelValue:r.value.password,"onUpdate:modelValue":e[4]||(e[4]=l=>r.value.password=l),type:"password",placeholder:"请输入您的密码！"},null,8,["modelValue"])]),_:1}),o(s,null,{default:t(()=>[o(S,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=l=>v.value=l)},{default:t(()=>[V("记住密码")]),_:1},8,["modelValue"]),o(S,{modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value=l)},{default:t(()=>[V("远程服务")]),_:1},8,["modelValue"])]),_:1}),o(s,null,{default:t(()=>[o(y,{type:"primary",class:"login-btn",onClick:b},{default:t(()=>[V("登录")]),_:1})]),_:1})]),_:1},8,["model"])])])}}};export{P as default};
